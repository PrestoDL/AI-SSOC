## 프로세스와 스레드

프로세스는 서로 완벽히 독립적인 공간을 가진다. 각자의 스택, 데이터 영역을 받고 보호받는다.

프로그램 실행의 단위라고도 볼 수 있다. 옛날을 기준으로는..

최근에는 복잡한 동시 작업을 요구하는 프로그램에 대해, 하나의 프로그램이 여러 프로세스를 만들어야 했는데 그렇게 되면 일일이 모든 프로세스에 공간과 자원을 배분해야 한다. 프로세스가 많아질수록 context switching 및 생성, 삭제가 느림.

스레드는 프로세스보다 더 작은 실행 단위 개념이다. 

 프로세스 내에서 여러 개의 스레드를 생성하여 스레드끼리 메모리를 공유하여 작동할 수 있기 때문에, 프로세스를 생성하는 것에 비해 context switching 및 생성, 삭제가 용이하다.

대신 스레드끼리 자원을 공유하기에 자원 선점과 동기화 관련 문제가 생긴다.





## 멀티프로세싱

하나의 응용 프로그램에 대해 동시에 여러 개의 프로세스를 실행할 수 있도록 하는 기술. 하나의 부모 프로세스가 여러 개의 자식 프로세스를 생성(fork)해서 다중 프로세스를 구성한다. 자식 프로세스는 부모 프로세스의 정보를 복사해서 만들어지지만, 엄연히 서로 다른 프로세스로 독립적으로 실행된다. 브라우저 탭이 멀티프로세싱의 대표적인 예이다.

각 프로세스의 메모리가 별도로 관리되기 때문에, 어떤 프로세스에 문제가 생기더라도 다른 프로세스에 영향을 끼치지 않아 안정적이다. 서버를 구성할 때도 쓰이는데, 멀티프로세싱을 사용해 여러 대의 서버에 요청을 분산시켜 처리함으로써 시스템 규모 확장 및 서버 장애 관리를 효율적으로 할 수 있다.

그러나 프로세스는 기본적으로 무겁기 때문에, context switching이 오래 걸리고 메모리 사용량이 높다. 그리고 프로세스 간 자원 공유가 필요할 경우 복잡한 통신 기법인 IPC를 사용해야 한다.





## 멀티스레딩

스레드는 프로세스 내에 있는 실행 흐름이다. 프로세스를 쪼개놨다고 봐도 괜찮을 것 같다. 하나의 프로세스 내에 두 개 이상의 스레드를 운용하는 기술을 멀티스레딩이라 한다. 웹 서버가 멀티스레딩의 대표적인 예이다. 웹 브라우저의 여러 탭이 프로세스 단위를 뜻한다면, 단일 탭 안에서의 이벤트, 네트워크 처리, I/O처리 등이 스레드 단위라고 보면 될 것 같다. 사용자가 서버에 자료를 요청하는 동시에 브라우저의 다른 기능을 이용할 수 있는 것이 그 덕분이다.

스레드는 프로세스보다 가볍다. 프로세스 내에서 생성되기에 새로 생성할 부분(코드, 데이터, 스택)이 많지 않으며 나머지 자원은 스레드끼리 공유하기에, 생성 및 삭제, context switching이 빠르고 메모리 사용량이 적다. 또한 스레드 간에 자원 공유가 편리하다. IPC 등 복잡한 기법 없이도 스레드 간 공유가 용이하다.

그러나, 스레드는 서로 독립적으로 동작하지 않기에 하나의 스레드에 문제가 생기면 다른 스레드들도 영향을 받아 프로세스 자체가 꺼질 수도 있다. 그리고 여러 스레드가 공유 자원에 동시에 접근할 수 있기 때문에 동기화 문제가 발생할 수 있다. 스레드 간의 질서를 유지시키기 위한 critical section, semaphore 등의 기법이 필요하다. 추가로 각 스레드의 동작을 추적하기 어려워 코드 디버깅이 힘들다. 어째 대부분이 프로그래머의 역량 아래 해결되어야 할 숙제들로 보인다..

